<template>
  <div class="lazyLoading">

    <div class="image-list">
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/1_series_5door.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/2_series_convertible.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/2_series_active_tourer.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/2_series_gran_tourer.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/3_series_sedan.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/3_series_sedan_swb.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/3_series_gt.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/4_series_coupe.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/4_series_convertible.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/4_series_gran_coupe.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/5_series_sedan.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/5_series_sedan.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/6_series_gt.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/7_series_sedan.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/3_series_sedan_swb.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/3_series_gt.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/4_series_coupe.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/4_series_convertible.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/4_series_gran_coupe.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/5_series_sedan.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/5_series_sedan.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/6_series_gt.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/7_series_sedan.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/3_series_sedan_swb.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/3_series_gt.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/4_series_coupe.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/4_series_convertible.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/4_series_gran_coupe.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/5_series_sedan.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/5_series_sedan.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/6_series_gt.png"/>
      <img class="image-item" src="" lazyload="true" data-original="https://www.bmw.com.cn/content/dam/bmw/marketCN/bmw_com_cn/model_card/7_series_sedan.png"/>
      
    </div>

  </div>
</template>

<script>
export default {
  name: "lazyLoading",
  data() {
    return {
      lazyLoading:0,
    };
  },
  computed:{},
  watch:{},
  created(){
    const screenHeight = document.documentElement.clientHeight
    function lazyload() {
      // 获取img标签含有设置data-orignal、lazyload的属性
      var elements = document.querySelectorAll('img[data-original][lazyload]')

      Array.prototype.forEach.call(elements, function (item, index) {
        var top
        var bottom
        if (item.dataset.original === '') {
          return
        }
        top = item.getBoundingClientRect().top
        bottom = item.getBoundingClientRect().bottom
        // 判断图片是否在可视界面
        if (bottom >= 0 && top < screenHeight) {
          !function () {
            var img = new Image()
            img.src = item.dataset.original
            img.onload = function () {
              item.src = img.src
            }
            item.removeAttribute('data-original')
            item.removeAttribute('lazyload')
          }()
        }
      })
    }

    lazyload()

    document.addEventListener('scroll', lazyload)
  },
  methods:{},
  mounted(){}
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped lang="scss">
.image-item{
  width: 40%;
  margin-right: 5%;
  height: 400px;
  display: inline-block;
  background-color: grey;
}
.image-list{
  margin-left: 5%;
}
</style>
